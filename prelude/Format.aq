#!/usr/local/bin/aq

Run 'StringFunctions.aq';

# a very simplistic implementation of format()
# handles %% and %0-%1
Format := \s : String, d : Dictionary ->
    If s eq '': ''
    ElseIf s sw '%':
        Let nextchar = charat(s, 1):
            If IsDigit(nextchar): d[nextchar]
            Else: nextchar
            EndIf
        EndLet
        & Format(substring1(s, 2), d)
    Else: head(s) & Format(tail(s), d)
    EndIf;

#!/usr/local/bin/aq

Run 'stringfunctions.aq';

# a very simplistic implementation of format()
# handles %% and %0-%1
format := \s : String, d : Dictionary ->
    If s eq '': ''
    ElseIf s sw '%':
        Let nextchar = charat(s, 1):
            If isdigit(nextchar): d[nextchar]
            Else: nextchar
            EndIf
        EndLet
        & format(substring1(s, 2), d)
    Else: head(s) & format(tail(s), d)
    EndIf;
